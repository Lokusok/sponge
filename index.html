<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Мочалка Зорина</title>
  <link rel="stylesheet" href="./style.css" />
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>
	<link
	  rel="stylesheet"
	  href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css"
	/>
	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Bona+Nova+SC:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body
	x-data="{
		modalOpen: false,
		cart: JSON.parse(localStorage.getItem('cart') ?? '[]'),
		
		get cartCount() {
			return this.cart.length;
		},
		
		get groupedCart() {
			return Object.groupBy(this.cart, ({ title }) => title);
		},
		
		get totalSum() {
			return this.cart.reduce((acc, c) => acc + c.price, 0);
		},
		
		countFor(id) {
			return this.cart.reduce((acc, c) => c.id == id ? acc + 1 : acc, 0);
		},
		
		updateLocalStorage() {
			localStorage.setItem('cart', JSON.stringify(this.cart));
		},
		
		deleteFromCart(id) {
			const findIndex = this.cart.findIndex((c) => c.id == id);
			
			if (findIndex != -1) {
				this.cart.splice(findIndex, 1);
			}
		},
	}"
	x-effect="updateLocalStorage"
	x-init="console.log(groupedCart)"
>
	
	<div>
	<div
		class="bg-black/50 w-full h-full fixed"
		x-show="modalOpen"
		x-transition
	>
		<div
			x-on:click.outside="modalOpen = false"
			class="bg-white p-3 left-[50%] top-[50%] absolute rounded shadow-sm min-w-[320px] max-w-[720px] -translate-x-[50%] -translate-y-[50%]"
		>
			<div
				class="absolute right-[10px] top-[10px] cursor-pointer hover:opacity-80 active:opacity-50"
				x-on:click="modalOpen = false"
			>
				&cross;
			</div>
		
			<div class="pb-[10px] mb-[10px] border-b border-b-slate-800">
				<h3 class="font-bold text-[24px] text-center">Корзина Зорина</h3>
			</div>
			
			<div class="grid grid-cols-3 gap-[40px]">
				<template x-for="item in cart">
					<div class="flex flex-col items-center">
						<img src="https://placehold.co/600x400" class="w-[70px] h-[70px] object-cover rounded-full" />
						<div class="text-center">
							<h3 x-text="item.title"></h3>
							<span class="text-slate-600 text-[14px]" x-text="item.price + ' руб.'"></span>
						</div>
					</div>
				</template>
			</div>
		
			<div class="pt-[10px] mt-[10px]  border-t border-t-slate-800 flex justify-center">
				<button class="zor rounded-md bg-teal-600 px-4 py-3 text-sm font-semibold text-white shadow-xs hover:bg-teal-700 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 border-none">
					Купить
				</button>
			</div>
		</div>
	</div>
	</div>

	<div :inert="modalOpen">
  <header>
    <h1 class="font-bold text-[40px]">Мочалка Зорина</h1>
  </header>
  
  <nav>
    <h3 class="title">Магазин Ивана Зорина Витальевича &copy; 2025</h3>
  </nav>
  
  <div
	class="mt-[30px] flex items-center flex-col justify-center gap-y-[10px] cursor-pointer hover:opacity-80 active:opacity-50"
	x-on:click="modalOpen = !modalOpen"
  >
	  <div class="max-w-[1024px] bg-[#009688] text-white font-bold text-center flex gap-[10px] px-3 py-2 rounded-md shadow-lg">
		В корзине:
		<p x-text="cartCount"></p>
	  </div>
	  
	  <div x-text="totalSum + ' руб.'"></div>
  </div>
  
  <div class="container">
    <section id="about">
      <h2>Добро пожаловать!</h2>
      <p>Мы предлагаем лучшие мочалки для ваших повседневных нужд. Наши высококачественные мочалки помогут вам поддерживать чистоту и уют дома.</p>
    </section>
    
    <section id="products">
      <h2>Наши товары</h2>
      <div class="products">
        <div class="product">
          <img class="hover:opacity-80 transition-all cursor-zoom-in" data-fancybox="top" data-caption="Мочалка Классика лично от Ивана Зорина Витальевича TOP 1" src="https://plus.unsplash.com/premium_photo-1684407616442-02e809d37267?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Мочалка 3">
          <h3>Мочалка Классика</h3>
          <p class="price">Цена: 100 руб.</p>
          <button x-on:click="cart.push({ id: 1, price: 100, title: 'Мочалка Классика' })" class="cart-btn">Купить</button>
		  <template x-if="cart.find((c) => c.id == 1)">
			  <button
					x-bind:disabled="cartCount <= 0"
					x-on:click="deleteFromCart(1)"
					class="bg-red-800 text-white font-bold border-none disabled:opacity-50 disabled:pointer-events-none"
			>
				&cross;
			  </button>
		  </template>
		  <div class="flex justify-center mt-[10px] text-[12px] text-gray">
			<template x-if="countFor(1)">
				<span x-text="'(' + countFor(1) + ' шт.)'"></span>
			</template>
		  </div>
        </div>
        <div class="product">
          <img class="hover:opacity-80 transition-all cursor-zoom-in" data-fancybox="top" data-caption="Мочалка Премиум лично от Ивана Зорина Витальевича TOP 2" src="https://images.unsplash.com/photo-1624804523111-d79f713350f9?q=80&w=2033&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Мочалка 2">
          <h3>
			Мочалка Премиум	
		  </h3>
          <p class="price">Цена: 200 руб.</p>
          <button x-on:click="cart.push({ id: 2, price: 200, title: 'Мочалка Премиум' })" class="cart-btn">Купить</button>
		  <template x-if="cart.find((c) => c.id == 2)">
			  <button
					x-bind:disabled="cartCount <= 0"
					x-on:click="deleteFromCart(2)"
					class="bg-red-800 text-white font-bold border-none disabled:opacity-50 disabled:pointer-events-none"
			>
				&cross;
			  </button>
		  </template>
		  <div class="flex justify-center mt-[10px] text-[12px] text-gray">
			<template x-if="countFor(2)">
				<span x-text="'(' + countFor(2) + ' шт.)'"></span>
			</template>
		  </div>
        </div>
        <div class="product">
          <img class="hover:opacity-80 transition-all cursor-zoom-in" data-fancybox="top" data-caption="Мочалка Экспресс лично от Ивана Зорина Витальевича TOP 3" src="https://images.unsplash.com/photo-1614669962064-f4bd314e38c3?q=80&w=1964&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Мочалка 1">
          <h3>Мочалка Экспресс</h3>
          <p class="price">Цена: 150 руб.</p>
          <button x-on:click="cart.push({ id: 3, price: 150, title: 'Мочалка Экспресс' })" class="cart-btn">Купить</button>
		  <template x-if="cart.find((c) => c.id == 3)">
			  <button
					x-bind:disabled="cartCount <= 0"
					x-on:click="deleteFromCart(3)"
					class="bg-red-800 text-white font-bold border-none disabled:opacity-50 disabled:pointer-events-none"
			> 
				&cross;
			  </button>
			</template>
			<div class="flex justify-center mt-[10px] text-[12px] text-gray">
				<template x-if="countFor(3)">
					<span x-text="'(' + countFor(3) + ' шт.)'"></span>
				</template>
			  </div>
        </div>
      </div>
    </section>
    
    <section id="contact">
      <h2>Контакты</h2>
      <p>Если у вас появились вопросы, вы можете связаться с нами по телефону или электронной почте:</p>
      <ul>
        <li>Телефон: +7 (999) 123-45-67</li>
        <li>Email: info@mochalkazorina.ru</li>
      </ul>
    </section>
  </div>
  
  <footer>
    <p>© 2025 Мочалка Зорина. Все права защищены.</p>
  </footer>
  </div>
  
  <script src="./script.js"></script>
</body>
</html>